<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

	<!-- Basic Page Needs
  ================================================== -->
	<meta charset="utf-8">
	<meta name="author" content="Simon Weber">
    
    <meta name="description" content="My thoughts on Golang and Openshift after finishing a project." />
    
	<link href="http://feeds.feedburner.com/SimonWeber" rel="alternate" title="Simon Weber" type="application/atom+xml" />
	<title>Strangers, Go, and Openshift</title>

	<!-- Mobile Specific Metas
  ================================================== -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, user-scalable=1">

	<!-- CSS
  ================================================== -->
	<link rel="stylesheet" href="/stylesheets/base.css">
	<link rel="stylesheet" href="/stylesheets/skeleton.css">
	<link rel="stylesheet" href="/stylesheets/layout.css">

	<link rel="stylesheet" href="/stylesheets/custom.css">
	<link rel="stylesheet" href="/stylesheets/pygments.css">

	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Favicons
	================================================== -->
	<link rel="shortcut icon" href="/images/favicon.ico">
	<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png">

</head>
<body>



    <!-- Primary Page Layout
    ================================================== -->
    <div class="container">
        <div class="four columns sidebar">
            <ul>
                <li><h3 id="logo"><a href="/index.html">Simon Weber</a></h3></li>
                <li><a href="mailto:simon@simonmweber.com">simon@simonmweber.com</a></li>
                <li>

                <div class="favicon five-spaced row">
                    <span><a href="https://github.com/simon-weber"><img alt="simon-weber" src="/images/github.ico"></a></span>
                    <span><a href="http://www.facebook.com/simon.weber1"> <img alt="simon.weber1" src="/images/facebook.ico"></a></span>
                    <span><a href="https://plus.google.com/103350848301234480355"> <img alt="Simon Weber" src="/images/plus.ico"></a></span>
		  <span><a href="http://news.ycombinator.com/user?id=simon_weber"> <img alt="simon_weber" src="/images/hn.ico"></a></span>
          <span><a href="https://twitter.com/#!/simonmweber"> <img alt="simonmweber" src="/images/twitter.ico"></a></span>
      </div>
      </li>
  </ul>

	    &nbsp;
    </div>

	  
    <div class="eleven columns offset-by-one content">
        <div id="post">
    <h2 id='strangers_go_and_openshift'>Strangers, Go, and Openshift</h2>
<p class='meta'>July 30 2013</p>
<p>I&#8217;ve always liked the idea of <a href='http://omegle.com'>Omegle</a>: one-on-one text chats with strangers. I also hang out in irc a lot, and thought it&#8217;d be fun to enable pulling a stranger into a channel. This wasn&#8217;t a new idea, but since Hacker School is all about learning by exploring, I built an <a href='https://github.com/simon-weber/omegle-to-irc'>omegle to irc bridge</a> with Twisted.</p>

<p>When I hooked it up in <a href='http://rochack.org/'>#rochack</a>, someone had the idea to pipe the stranger&#8217;s input to our resident markov chain bot. Hilarity ensued.</p>

<p>I wanted to be able to share this and had been itching to try Go&#8217;s CSP-influenced concurrency support, so I built <a href='http://strangerbotting-simonmweber.rhcloud.com'>Strangerbotting</a>. There are a few pieces to it:</p>

<ul>
<li><a href='https://github.com/simon-weber/gomegle'>gomegle</a>: a go client library for Omegle</li>

<li><a href='https://github.com/simon-weber/gomarkov'>gomarkov</a>: simple, fast, in-memory markov chains for text generation</li>

<li><a href='https://github.com/simon-weber/strangerbotting-backend'>strangerbotting-backend</a>: manages one bot-to-stranger conversation and streams it out over websockets. Runs on Openshift.</li>

<li><a href='https://github.com/simon-weber/strangerbotting-frontend'>strangerbotting-frontend</a>: a simple webclient to display conversations. Also runs on Openshift.</li>
</ul>

<p>There&#8217;s nothing too magical going on in the code, so I won&#8217;t bother talking about it. However, I have some new opinions on Go and Openshift that I wanted to write down.</p>

<h3 id='golang'>Golang</h3>

<p>Before getting started with Go, I&#8217;d seen a lot of folks complain about the more pedantic parts of the language (eg &#8220;why is an unused import a compile error!?&#8221;). To me, this indicates one of:</p>

<ul>
<li>disagreement with Google&#8217;s engineering culture</li>

<li>unfamiliarity with Go&#8217;s design goals</li>
</ul>

<p>First, it&#8217;s important to realize that Go is a language by Google, for Google; of course their conservative engineering tendencies show through. Second, the language was designed to compile quickly, and disallowing unused imports supports this goal (see <a href='http://talks.golang.org/2012/splash.article#TOC_7.'>this</a> for details).</p>

<p>However, in spite of my Google indoctrination, I still found error handling a bit wonky. For those unfamiliar with the language, here&#8217;s the relevant part of the Go faq:</p>
<blockquote>
<p>
Why does Go not have exceptions?
</p>

<p>
We believe that coupling exceptions to a control structure, as in the try-catch-finally idiom, results in convoluted code.
It also tends to encourage programmers to label too many ordinary errors, such as failing to open a file, as exceptional.
</p>

<p>
Go takes a different approach.
For plain error handling, Go's multi-value returns make it easy to report an error without overloading the return value.
A canonical error type, coupled with Go's other features, makes error handling pleasant but quite different from that in other languages.
</p>

<p>
Go also has a couple of built-in functions to signal and recover from truly exceptional conditions.
The recovery mechanism is executed only as part of a function's state being torn down after an error, which is sufficient to handle catastrophe but requires no extra control structures and, when used well, can result in clean error-handling code.
</p>
</blockquote>
<p>Coming from Python, this philosophy stuck out. The majority of function calls get wrapped in a conditional check on a returned error, which seems overly verbose and tedious. This certainly required some getting used to, but now doesn&#8217;t bother me much. After all, I end up using a similar number of try/except blocks when writing robust Python code.</p>

<p>What does bother me is the loss of debugging information without exceptions. For example, here&#8217;s an error I received from Go&#8217;s http client: <code>Post http://front2.omegle.com/events: EOF</code>. The unclear message and lack of a stacktrace left me guessing: is my code broken? Is Go&#8217;s? Maybe it was the server? I ended up reluctantly grepping the stdlib source, since I didn&#8217;t even have a line number to go off of.</p>

<p>Thankfully, Go&#8217;s concurrency support makes up for this and then some. Goroutines and selection over channels make reasoning about concurrency super easy. Sorry, Twisted: I&#8217;m a convert.</p>

<p>The stdlib is pretty decent, but can feel somewhat inconsistent. Deques? Nope. <a href='http://golang.org/pkg/index/suffixarray/'>Suffix arrays</a>? &#8230;Yes? Huh. For now, I&#8217;m willing to write this off a combination of Python spoiling me and Go being relatively new.</p>

<p>However, despite its youth, Go&#8217;s community is fantastic. I&#8217;ve had nothing but good experiences in <code>#go-nuts</code>, and <a href='http://play.golang.org'>play.golang.org</a> is a big win when sharing code.</p>

<p>Overall, I came away pleased with Go, and I think I&#8217;ll definitely favor it for backend work in the future.</p>

<h3 id='openshift'>Openshift</h3>

<p>Openshift left me with more mixed feelings. On one hand, I love the ability to ssh into a PaaS box and have a persistent filesystem. On the other, their docs are pretty bad. Then again, the free tier is generous&#8230;but custom buildpack development is painful. And, while the community is there, it has a distinct Java/.NET flavor to it.</p>

<p>I feel like I could pick positives and negatives all day long, and in the end it just about cancels out. I&#8217;ll be rooting for them, but I don&#8217;t see myself paying for the service any time soon.</p>
</div>

<div id="post-footer">
    <hr>
    <div id="subscribe">
        <p>
        <a href="http://feeds.feedburner.com/SimonWeber"><img src="/images/rss.png" alt="Subscribe to RSS Feed" /></a>
        </p>
    </div>
</div>

    </div>
</div><!-- container -->



	<!-- JS
	     ================================================== -->
	<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
	<script src="/javascripts/tabs.js"></script>
	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-29570993-2']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>

<!-- End Document
================================================== -->
</body>
</html>
